(function(){"use strict";var e={821:function(e,t,a){var n=a(751),o=a(641),l=a(953),r=a(810),s=a(335);const i=(0,r.nY)("auth",{state:()=>({token:localStorage.getItem("token")||null}),actions:{async login(e,t){try{const a=await s.A.post("https://dev-api.aiscreen.io/api/v1/login",{email:e,password:t});this.token=a.data.token,localStorage.setItem("token",this.token)}catch(a){throw new Error("Authorization error")}},logout(){this.token=null,localStorage.removeItem("token")}}});var u=a(220),c={__name:"LogoutBtn",setup(e){const t=i(),a=(0,u.rd)();function n(){t.logout(),a.push("/login")}return(e,a)=>(0,l.R1)(t).token?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:n,class:"bg-red-500 text-white font-semibold p-2 rounded hover:bg-red-600 transition"}," Logout ")):(0,o.Q3)("",!0)}};const p=c;var d=p;const m={class:"flex justify-between items-center p-2 gap-2 border-b"};var h={__name:"Header",setup(e){const t=i();return(e,a)=>{const n=(0,o.g2)("RouterLink");return(0,o.uX)(),(0,o.CE)("div",m,[(0,l.R1)(t).token?((0,o.uX)(),(0,o.Wv)(n,{key:0,to:"/",class:"text-blue-500 hover:underline font-semibold"},{default:(0,o.k6)((()=>a[0]||(a[0]=[(0,o.eW)(" Main ")]))),_:1,__:[0]})):(0,o.Q3)("",!0),(0,o.bF)(d)])}}};const v=h;var g=v,f={__name:"App",setup(e){return(e,t)=>{const a=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(g),(0,o.bF)(a)],64)}}};const b=f;var w=b,y={__name:"LoginView",setup(e){const t=(0,l.KR)("hello@aiscreen.io"),a=(0,l.KR)("Demo!1234"),r=i(),s=(0,u.rd)(),c=async()=>{try{await r.login(t.value,a.value),s.push("/")}catch(e){alert(e.message)}};return(e,l)=>((0,o.uX)(),(0,o.CE)("form",{onSubmit:(0,n.D$)(c,["prevent"]),class:"flex flex-col gap-4 p-6 bg-white rounded shadow-md max-w-sm mx-auto"},[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":l[0]||(l[0]=e=>t.value=e),type:"email",placeholder:"Email",required:"",class:"border border-gray-300 rounded px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[n.Jo,t.value]]),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":l[1]||(l[1]=e=>a.value=e),type:"password",placeholder:"Password",required:"",class:"border border-gray-300 rounded px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[n.Jo,a.value]]),l[2]||(l[2]=(0,o.Lk)("button",{type:"submit",class:"bg-blue-500 text-white font-semibold py-2 rounded hover:bg-blue-600 transition"}," Login ",-1))],32))}};const k=y;var x=k;const _=(0,r.nY)("templates",{state:()=>({templates:[],tags:[]}),actions:{async fetchTags(){const e=i();try{const t=await s.A.get("https://dev-api.aiscreen.io/api/v1/canvas_templates/tags/list",{headers:{Authorization:`Bearer ${e.token}`}});this.tags=t.data}catch(t){console.error("Error loading tags:",t)}},async fetchTemplates(){const e=i(),t=await s.A.get("https://dev-api.aiscreen.io/api/v1/canvas_templates",{headers:{Authorization:`Bearer ${e.token}`}});this.templates=t.data},async fetchTemplateById(e){try{const t=i(),a=await s.A.get(`https://dev-api.aiscreen.io/api/v1/canvas_templates/${e}`,{headers:{Authorization:`Bearer ${t.token}`}}),n=a.data;return this.templates.find((t=>t.id===e))||this.templates.push(n),n}catch(t){throw new Error("Template not found")}},async createTemplate(e){const t=i(),a={...e,tags:e.tags?e.tags.split(",").map((e=>e.trim())):null},n=await s.A.post("https://dev-api.aiscreen.io/api/v1/canvas_templates",a,{headers:{Authorization:`Bearer ${t.token}`}});return this.templates.push(n.data),n.data},async deleteTemplate(e){const t=i();await s.A.delete("https://dev-api.aiscreen.io/api/v1/canvas_templates",{data:{id:e},headers:{Authorization:`Bearer ${t.token}`}}),this.templates=this.templates.filter((t=>t.id!==e))},async updateTemplate(e){const t=i();try{const a=await s.A.put(`https://dev-api.aiscreen.io/api/v1/canvas_templates/${e.id}`,{name:e.name,width:String(e.width),height:String(e.height),tags:e.tags||[],objects:e.objects||null},{headers:{Authorization:`Bearer ${t.token}`}}),n=this.templates.findIndex((t=>t.id===e.id));return-1!==n&&(this.templates[n]=a.data),a.data}catch(a){throw console.error("Error updating template:",a),a}}}});var L=a(33);const C={class:"template-card border rounded shadow p-4 flex flex-col gap-2"},E={class:"text-lg font-bold"},T={class:"w-full h-48 rounded mt-2 overflow-hidden bg-gray-100 flex items-center justify-center"},A=["src"],X={key:1,class:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},S={class:"flex gap-2 mt-2"};var V={__name:"TemplateCard",props:{template:{type:Object,required:!0}},setup(e){return(t,a)=>((0,o.uX)(),(0,o.CE)("div",C,[(0,o.Lk)("h3",E,(0,L.v_)(e.template.name),1),(0,o.Lk)("div",T,[e.template.preview_image?((0,o.uX)(),(0,o.CE)("img",{key:0,src:e.template.preview_image,alt:"Preview",class:"w-full h-full object-cover"},null,8,A)):((0,o.uX)(),(0,o.CE)("svg",X,a[2]||(a[2]=[(0,o.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v16a1 1 0 01-1 1H4a1 1 0 01-1-1V4zm3 14l3.586-3.586a2 2 0 012.828 0L17 18M9 10a2 2 0 100-4 2 2 0 000 4z"},null,-1)])))]),(0,o.Lk)("div",S,[(0,o.Lk)("button",{onClick:a[0]||(a[0]=a=>t.$emit("edit",e.template)),class:"bg-blue-500 text-white py-1 px-3 rounded hover:bg-blue-600"}," View/Edit "),(0,o.Lk)("button",{onClick:a[1]||(a[1]=a=>t.$emit("delete",e.template.id)),class:"bg-red-500 text-white py-1 px-3 rounded hover:bg-red-600"}," Delete ")])]))}},j=a(262);const B=(0,j.A)(V,[["__scopeId","data-v-8ff4fa1a"]]);var $=B;const F={class:"flex flex-wrap gap-2 mt-4"},O=["onClick"];var K={__name:"FilterTags",props:{tags:{type:Array,required:!0},selectedTag:{type:String,default:null}},setup(e){return(t,a)=>((0,o.uX)(),(0,o.CE)("div",F,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.tags,(a=>((0,o.uX)(),(0,o.CE)(o.FK,{key:a},[a?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:e=>t.$emit("filter",a),class:(0,L.C4)(["text-sm px-3 py-1 rounded transition",a===e.selectedTag?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"])},(0,L.v_)(a),11,O)):(0,o.Q3)("",!0)],64)))),128)),(0,o.Lk)("button",{onClick:a[0]||(a[0]=e=>t.$emit("filter",null)),class:(0,L.C4)(["text-sm underline",e.selectedTag?"text-gray-500":"text-blue-600 font-semibold"])}," Clear filter ",2)]))}};const R=K;var U=R,I=a(221),J=a.n(I),z={__name:"SearchBar",emits:["update-search"],setup(e,{emit:t}){const a=t,r=(0,l.KR)(""),s=J()((()=>{a("update-search",r.value)}),300);return(0,o.wB)(r,(()=>{s()})),(e,t)=>(0,o.bo)(((0,o.uX)(),(0,o.CE)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>r.value=e),placeholder:"Search...",class:"border rounded p-2 w-full"},null,512)),[[n.Jo,r.value]])}};const q=z;var W=q;const D={class:"home-view p-4"},M={class:"mb-4"},N={key:0,class:"text-gray-500 text-center mt-8"},H={key:1,class:"grid sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 mt-8"};var P={__name:"HomeView",setup(e){const t=_(),a=(0,u.rd)(),n=(0,l.KR)(""),r=(0,l.KR)(null);t.fetchTemplates(),t.fetchTags();const s=(0,o.EW)((()=>t.tags)),i=(0,o.EW)((()=>t.templates)),c=(0,l.KR)([]);function p(){let e=i.value;if(r.value&&(e=e.filter((e=>e.tags&&e.tags.includes(r.value)))),n.value){const t=n.value.toLowerCase();e=e.filter((e=>e.name.toLowerCase().includes(t)))}c.value=e}const d=J()(p,300);(0,o.wB)(n,(()=>{d()})),(0,o.wB)(r,(()=>{p()})),(0,o.wB)(i,(()=>{p()}));const m=async e=>{try{await t.deleteTemplate(e),p()}catch(a){alert("Error deleting template")}},h=e=>{a.push(`/template/${e.id}`)},v=e=>{n.value=e},g=e=>{r.value=e};return(e,t)=>{const a=(0,o.g2)("RouterLink");return(0,o.uX)(),(0,o.CE)("div",D,[t[1]||(t[1]=(0,o.Lk)("h1",{class:"text-xl font-bold mb-4"},"My templates",-1)),(0,o.Lk)("div",M,[(0,o.bF)(a,{to:"/add-template",class:"bg-green-500 text-white p-2 rounded"},{default:(0,o.k6)((()=>t[0]||(t[0]=[(0,o.eW)("Add template")]))),_:1,__:[0]})]),(0,o.bF)(W,{onUpdateSearch:v}),(0,o.bF)(U,{tags:s.value,"selected-tag":r.value,onFilter:g},null,8,["tags","selected-tag"]),c.value.length?((0,o.uX)(),(0,o.CE)("div",H,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(c.value,(e=>((0,o.uX)(),(0,o.Wv)($,{key:e.id,template:e,onDelete:m,onEdit:h},null,8,["template"])))),128))])):((0,o.uX)(),(0,o.CE)("p",N,"No templates"))])}}};const Q=(0,j.A)(P,[["__scopeId","data-v-2e5f4723"]]);var Y=Q;const G={class:"p-4 max-w-xl mx-auto"};var Z={__name:"TemplateView",setup(e){const t=(0,u.lq)(),a=(0,u.rd)(),r=_(),s=(0,l.KR)({id:null,name:"",width:0,height:0,tags:[],preview_image:""}),i=(0,l.KR)("");(0,o.sV)((async()=>{const e=t.params.id;let n=r.templates.find((t=>t.id===Number(e)));if(!n)try{n=await r.fetchTemplateById(e)}catch(o){return console.error(o),a.push("/")}s.value={...n,width:Number(n.width),height:Number(n.height),tags:n.tags||[],preview_image:n.preview_image||""},i.value=s.value.tags.join(", ")})),(0,o.wB)(i,(e=>{s.value.tags=e.split(",").map((e=>e.trim())).filter((e=>e))}));const c=async()=>{await r.updateTemplate(s.value)};return(e,t)=>((0,o.uX)(),(0,o.CE)("div",G,[t[6]||(t[6]=(0,o.Lk)("h1",{class:"text-xl font-bold mb-4"},"Edit template",-1)),(0,o.Lk)("form",{onSubmit:(0,n.D$)(c,["prevent"]),class:"flex flex-col gap-4"},[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>s.value.name=e),class:"input",placeholder:"Name"},null,512),[[n.Jo,s.value.name]]),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>s.value.width=e),class:"input",type:"number",placeholder:"Width",min:"1"},null,512),[[n.Jo,s.value.width,void 0,{number:!0}]]),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>s.value.height=e),class:"input",type:"number",placeholder:"Height",min:"1"},null,512),[[n.Jo,s.value.height,void 0,{number:!0}]]),(0,o.Lk)("div",null,[t[4]||(t[4]=(0,o.Lk)("label",{class:"block mb-1 text-sm font-medium"},"Tags (comma separated)",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>i.value=e),class:"input",placeholder:"e.g. promo, sale"},null,512),[[n.Jo,i.value]])]),t[5]||(t[5]=(0,o.Lk)("button",{class:"bg-blue-500 text-white p-2 rounded hover:bg-blue-600 transition"}," Save ",-1))],32)]))}};const ee=(0,j.A)(Z,[["__scopeId","data-v-4e4a0650"]]);var te=ee;const ae={class:"p-4 max-w-xl mx-auto"};var ne={__name:"AddTemplate",setup(e){const t=(0,l.KR)({name:"",description:"",width:"",height:"",objects:null,tags:""}),a=(0,u.rd)(),r=_(),s=async()=>{try{await r.createTemplate(t.value),a.push("/")}catch(e){console.error("Error creating template:",e),alert("Failed to create template.")}};return(e,a)=>((0,o.uX)(),(0,o.CE)("div",ae,[a[6]||(a[6]=(0,o.Lk)("h1",{class:"text-xl font-bold mb-4"},"Create New Template",-1)),(0,o.Lk)("form",{onSubmit:(0,n.D$)(s,["prevent"]),class:"flex flex-col gap-4"},[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>t.value.name=e),class:"input",placeholder:"Name",required:""},null,512),[[n.Jo,t.value.name]]),(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":a[1]||(a[1]=e=>t.value.description=e),class:"input",placeholder:"Description"},null,512),[[n.Jo,t.value.description]]),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":a[2]||(a[2]=e=>t.value.width=e),class:"input",type:"text",placeholder:"Width",required:""},null,512),[[n.Jo,t.value.width]]),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":a[3]||(a[3]=e=>t.value.height=e),class:"input",type:"text",placeholder:"Height",required:""},null,512),[[n.Jo,t.value.height]]),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":a[4]||(a[4]=e=>t.value.tags=e),class:"input",placeholder:"Tags (comma-separated)"},null,512),[[n.Jo,t.value.tags]]),a[5]||(a[5]=(0,o.Lk)("button",{class:"bg-green-500 text-white p-2 rounded hover:bg-green-600"}," Create Template ",-1))],32)]))}};const oe=(0,j.A)(ne,[["__scopeId","data-v-64c38964"]]);var le=oe;const re=[{path:"/",name:"Home",component:Y},{path:"/login",name:"Login",component:x},{path:"/template/:id",name:"Template",component:te,props:!0},{path:"/add-template",name:"AddTemplate",component:le}],se=(0,u.aE)({history:(0,u.LA)(),routes:re});se.beforeEach(((e,t,a)=>{const n=i();"Login"===e.name||n.token?a():a({name:"Login"})}));var ie=se;const ue=(0,n.Ef)(w),ce=(0,r.Ey)();ue.use(ce),ue.use(ie),ue.mount("#app")}},t={};function a(n){var o=t[n];if(void 0!==o)return o.exports;var l=t[n]={exports:{}};return e[n](l,l.exports,a),l.exports}a.m=e,function(){var e=[];a.O=function(t,n,o,l){if(!n){var r=1/0;for(c=0;c<e.length;c++){n=e[c][0],o=e[c][1],l=e[c][2];for(var s=!0,i=0;i<n.length;i++)(!1&l||r>=l)&&Object.keys(a.O).every((function(e){return a.O[e](n[i])}))?n.splice(i--,1):(s=!1,l<r&&(r=l));if(s){e.splice(c--,1);var u=o();void 0!==u&&(t=u)}}return t}l=l||0;for(var c=e.length;c>0&&e[c-1][2]>l;c--)e[c]=e[c-1];e[c]=[n,o,l]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var o,l,r=n[0],s=n[1],i=n[2],u=0;if(r.some((function(t){return 0!==e[t]}))){for(o in s)a.o(s,o)&&(a.m[o]=s[o]);if(i)var c=i(a)}for(t&&t(n);u<r.length;u++)l=r[u],a.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return a.O(c)},n=self["webpackChunktest"]=self["webpackChunktest"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=a.O(void 0,[504],(function(){return a(821)}));n=a.O(n)})();
//# sourceMappingURL=app.ae3e0ab6.js.map